<link rel="stylesheet" type="text/css" href="css/styles.css"/>
<link rel="stylesheet" type="text/css" href="css/rs_dialog.css"/>
<script type="text/javascript" src="scripts/rs_wcl.js"></script>
<script type="text/javascript" src="scripts/rs_dialog.js"></script>
<script type="text/javascript" src="scripts/rs_gamepad_generic_adapter.js"></script>
<script type="text/javascript">

	window.addEventListener('gamepadconnected', (event)=> {
		console.log("Manette connectée");

		let adapter = new GamepadGenericAdapter();

		setInterval(()=> {
			adapter.applyControlsMapping();
			console.log({
				angle_left: adapter.leftJoystick.angle,
				intensity_left: adapter.leftJoystick.intensity,
				angle_right: adapter.rightJoystick.angle,
				intensity_right: adapter.rightJoystick.intensity,
				angle_gyro: adapter.accelerometer ? adapter.accelerometer.angle : "-",
				intensity_gyro: adapter.accelerometer ? adapter.accelerometer.intensity : "-"
			});
		}, 35);
	});

	window.addEventListener('gamepaddisconnected', (event)=> {
		console.log("Manette déconnectée");
	})

</script>