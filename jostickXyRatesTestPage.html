<link rel="stylesheet" type="text/css" href="css/styles.css"/>
<link rel="stylesheet" type="text/css" href="css/rs_dialog.css"/>
<script type="text/javascript" src="scripts/rs_wcl.js"></script>
<script type="text/javascript" src="scripts/rs_dialog.js"></script>
<script type="text/javascript" src="scripts/rs_gamepad_generic_adapter.js"></script>
<script type="text/javascript">

	window.addEventListener('gamepadconnected', (event)=> {
		console.log("Manette connectée");

		let adapter = new GamepadGenericAdapter();

		setInterval(()=> {
			adapter.applyControlsMapping();
			console.log({
				x_left: adapter.leftJoystick.x,
				y_left: adapter.leftJoystick.y,
				x_right: adapter.rightJoystick.x,
				y_right: adapter.rightJoystick.y,
				x_gyro: adapter.accelerometer ? adapter.accelerometer.x : "-",
				y_gyro: adapter.accelerometer ? adapter.accelerometer.y : "-"
			});
		}, 35);
	});

	window.addEventListener('gamepaddisconnected', (event)=> {
		console.log("Manette déconnectée");
	})

</script>